<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Supplement Tracker</title>
  <link rel="apple-touch-icon" href="icon.png" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #f5f5f5;
    }
    header {
      text-align: center;
      padding: 1em;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 1em;
    }
    .day-selector {
      display: flex;
      justify-content: center;
      gap: 1em;
      margin-bottom: 1em;
    }
    .supplement {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #1e1e1e;
      padding: 0.75em 1em;
      border-radius: 12px;
      margin: 0.5em 0;
      opacity: 1;
      transition: 0.3s;
    }
    .supplement.paused {
      opacity: 0.4;
    }
    .supplement span.icon {
      margin-left: 0.5em;
    }
    textarea {
      width: 100%;
      height: 80px;
      margin-top: 1em;
      border-radius: 10px;
      padding: 0.5em;
      background: #1e1e1e;
      color: #f5f5f5;
      border: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>Supplement Tracker</h1>
  </header>
  <div class="container">
    <div class="day-selector">
      <button onclick="setDayType('training')">Training</button>
      <button onclick="setDayType('rest')">Ruhetag</button>
    </div>
    <div id="supplements"></div>
    <textarea id="notes" placeholder="Notizen f√ºr heute..."></textarea>
  </div>

  <script>
    const dayData = JSON.parse(localStorage.getItem('trackerData')) || {
      dayCount: 0,
      cycles: {
        creatine: 0,
        omega: 0,
        d3: 0,
        ashwagandha: 0
      },
      history: []
    };

    const supplementPlan = [
      { name: "Vitamin B12", time: "‚è∞", icon: "ü©∏", cycle: false },
      { name: "Ashwagandha", time: "‚è∞", icon: "üßò", cycle: { on: 42, off: 14, key: "ashwagandha" } },
      { name: "D3 + K2", time: "‚è∞", icon: "ü¶¥", cycle: { on: 56, off: 14, key: "d3" } },
      { name: "Omega 3", time: "‚è∞", icon: "üß†", cycle: { on: 42, off: 7, key: "omega" } },
      { name: "Magnesium", time: "üåô", icon: "üí§", cycle: false },
      { name: "Creatin", time: "üèÉ", icon: "üèãÔ∏è", cycle: { on: 42, off: 14, key: "creatine" } },
      { name: "Citrullin", time: "üèÉ", icon: "üí™", cycle: false },
      { name: "Whey Shake", time: "ü§Ø", icon: "ü•§", cycle: false },
      { name: "Whey Night", time: "üò¥", icon: "ü•§üí§", cycle: false }
    ];

    function setDayType(type) {
      dayData.dayCount++;
      const today = { type, supplements: {}, notes: "" };
      supplementPlan.forEach(sup => {
        if (sup.cycle) {
          const cycleDay = ++dayData.cycles[sup.cycle.key];
          const paused = cycleDay > sup.cycle.on && cycleDay <= (sup.cycle.on + sup.cycle.off);
          if (cycleDay > (sup.cycle.on + sup.cycle.off)) {
            dayData.cycles[sup.cycle.key] = 1;
          }
          today.supplements[sup.name + sup.time] = !paused;
        } else {
          today.supplements[sup.name + sup.time] = true;
        }
      });
      dayData.history.push(today);
      localStorage.setItem('trackerData', JSON.stringify(dayData));
      renderSupplements(today);
    }

    function renderSupplements(today) {
      const container = document.getElementById('supplements');
      container.innerHTML = '';
      supplementPlan.forEach(sup => {
        const isActive = today.supplements[sup.name + sup.time];
        const div = document.createElement('div');
        div.className = 'supplement' + (isActive ? '' : ' paused');
        div.innerHTML = `
          <label>
            <input type="checkbox" ${!isActive ? 'disabled' : ''}>
            ${sup.icon} ${sup.name} <span class="icon">${isActive ? sup.time : '‚è∏Ô∏è'}</span>
          </label>
        `;
        container.appendChild(div);
      });
      document.getElementById('notes').value = today.notes;
    }

    if (dayData.history.length > 0) {
      renderSupplements(dayData.history[dayData.history.length - 1]);
    }
  </script>
</body>
</html>
